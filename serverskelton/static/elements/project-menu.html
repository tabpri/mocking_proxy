<link rel="import" href="/static/bower_components/polymer/polymer.html">
<link rel="import" href="/static/elements/preference-dialog.html">
<link rel="import" href="/static/elements/common/ajax-img.html">
<link rel="import" href="/static/elements/common/flex-label.html">
<link rel="import" href="/static/elements/base-styles.html">
<link rel="import" href="/static/local_components/i18n-data/i18n-data.html">

<dom-module id="project-menu">
    <template>
        <style include="base-styles"></style>
        <style>
            :host {
                /*background-color: var(--code-color-background-code-menu);*/
                color: var(--code-color-font-white);
                padding: 5px 20px 5px 10px;
                @apply(--layout-horizontal);
                @apply(--layout-center);
                @apply(--layout-end-justified);
                height:46px;
            }

            .gear {
                margin-left: 0;
                color: var(--code-color-gear-color);
            }

            .horizontal {
                @apply(--layout-horizontal);
            }

            drop-down .dropdown-content{
                color: var(--code-color-font-white);
                background-color: white;
            }

            drop-down .dropdown-content div {
                padding: 8px;
            }

            drop-down .dropdown-content img{
                display: block;
                background-color: white;
                padding: 16px;
            }

            .icon-l {
                height: 30px;
                width: 30px;
                margin-top: 5px;
            }

            .code-menu-right {
                margin: 5px auto 5px 0;
            }



            /*[show] {*/
                /*visibility: visible;*/
            /*}*/

        </style>

        <preference-dialog id="preferenceDialog" selected-tab-id="{{_selectedTabId}}"></preference-dialog>


        <div class="gear horizontal">
            <drop-down vertical-align="top" horizontal-align="right">
                <div class="horizontal dropdown-trigger cursor-pointer">
                    <ajax-img class="icon-s" src="/static/img/icn-global_setting.svg" ></ajax-img>
                </div>

                <div class="dropdown-content cursor-pointer">
                    <div on-tap="_showPreference">{{resource.preference}}</div>
                </div>
            </drop-down>
        </div>
        <i18n-data value="{{resource}}"></i18n-data>

    </template>

    <script>
        (function () {
            Polymer({
                is: "project-menu",
                properties: {
                    _selectedTabId: {
                        type: Number,
                        notify: true,
                    },
                    _CONST: {
                        type: Object,
                        value: CONST,
                        readOnly: true,
                    }
                },

                _showPreference: function () {
                    this._selectedTabId = 0;
                    this.$.preferenceDialog.show()
                },
                eq: function(a, b) {
                    return a == b;
                },
                _isNotBlankObject: function (obj) {
                    if(obj != null && Object.keys(obj).length){
                        return true;
                    }
                    return false;
                }
            });

        }());
    </script>
</dom-module>
